{% extends 'base.html' %}
{% block title %}Paiement rÃ©ussi â€” Examhub{% endblock %}

{% block content %}
<div class="bg-white rounded-2xl shadow p-8 text-center">
  <h1 class="text-2xl font-bold mb-2">Merci ğŸ‰</h1>
  <p class="text-gray-700">Votre paiement a Ã©tÃ© confirmÃ©. Vos packs sont maintenant disponibles.</p>
  <div class="mt-6 flex justify-center gap-3">
    <a class="px-4 py-2 rounded-xl bg-blue-600 text-white" href="{% url 'exams:index' %}">Retour aux packs</a>
    <a class="px-4 py-2 rounded-xl bg-green-600 text-white" href="{% url 'exams:cart_detail' %}">Voir mon panier</a>
    <a class="px-4 py-2 rounded-xl bg-indigo-600 text-white" href="{% url 'exams:notifications_list' %}">Mes notifications</a>
  </div>
</div>

<!-- Modale post-paiement -->
<div id="successModal" class="fixed inset-0 bg-black/40 flex items-center justify-center p-4 {% if show_modal %}{% else %}hidden{% endif %}">
  <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full">
    <div class="flex items-center justify-between border-b p-4">
      <div class="font-bold text-lg">Paiement rÃ©ussi</div>
      <button onclick="document.getElementById('successModal').classList.add('hidden')" class="w-8 h-8 rounded-full hover:bg-gray-100">âœ•</button>
    </div>
    <div class="p-5 space-y-4">
      <p>
        Paiement de la somme de <strong>{{ total_paid }} F</strong> effectuÃ© avec succÃ¨s.
        Pour obtenir les packs que vous venez dâ€™acheter sur votre appareil (tÃ©lÃ©phones, tablettes, ordinateurs, etc),
        veuillez ci-dessous cliquer sur le bouton Â«&nbsp;TÃ©lÃ©charger ZIP&nbsp;Â» prÃ©sent sur chacun de ces packs.
      </p>

      {% if packs_info %}
        <ul class="divide-y rounded-xl border">
          {% for p in packs_info %}
            <li class="p-4 flex items-center justify-between">
              <span class="font-medium">{{ p.name }}</span>
              <a class="px-3 py-2 rounded-xl bg-green-600 text-white" href="{{ p.download_url }}">TÃ©lÃ©charger ZIP</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="p-4 bg-gray-50 rounded">Aucun pack Ã  afficher.</div>
      {% endif %}
    </div>
    <div class="border-t p-4 text-right">
      <button onclick="document.getElementById('successModal').classList.add('hidden')" class="px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300">Fermer</button>
    </div>
  </div>
</div>
{% endblock %}
